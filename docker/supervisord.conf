[supervisord]
nodaemon=true
user=app
logfile=/app/logs/supervisord.log
pidfile=/app/logs/supervisord.pid

[program:npcl-voice-assistant]
command=/usr/local/bin/python src/main.py --ari-bot
directory=/app
user=app
autostart=true
autorestart=true
stderr_logfile=/app/logs/voice-assistant.err.log
stdout_logfile=/app/logs/voice-assistant.out.log
environment=PYTHONPATH="/app/src"

[program:health-monitor]
command=/bin/bash -c "while true; do sleep 30; curl -f http://localhost:8000/ari/health >/dev/null 2>&1 || echo 'Health check failed'; done"
directory=/app
user=app
autostart=true
autorestart=true
stderr_logfile=/app/logs/health-monitor.err.log
stdout_logfile=/app/logs/health-monitor.out.log